# Проблема высокого DPI (high DPI problem)
Возможно Вы уже сталкивались с известной проблемой приложений под Windows - проблемой с DPI. Если же нет, то я вкраце опишу её. 

Пусть вы установили на Windows приложение, и при открытии видите, что текст в его окне размыт и накладывается друг на друга. Или пусть Вы создаёте приложение
на WinForms с помощью Visual Studio и видите, что ваше окно в редакторе форм выглядит чётче, чем оно есть при запуске. Почему же это происходит?
Если говорить простым языком, то Windows криво масштабирует окна приложений, и это можно попытаться исправить, запретив ОС масштабировать данное приложение (в этом
случае приложение должно уметь самостоятельно подгонять масштаб).

Если говорить более сложным языком, то эта проблема связана с высоким значением DPI - количеством пикселей на дюйм, на вашем ПК. Windows ОС при запуске вашего приложения говорит ему,
что DPI на ПК стандартный (96). В результате приложение генерирует слишком маленькое окно, а ОС впоследствии его растягивает (масштабирует) путём увеличения числа 
одинаковых пикселей. Это и приводит к потере качества. Большинство современных приложений умеет производить масштабирование своими силами. Но чтобы они увидели реальное
значение DPI вашего ПК и поняли, что изменять масштаб вообще необходимо, придётся заставить Windows выдать правдивое значение DPI монитора. Чтобы это сделать, необходимо 
для данного приложения поднять dpiAware-флаг.

Конечно, если у Вас есть доступ к исходным кодам приложения, то сделать это - как два пальца об асфальт. Например, на языке C++ необходимо добавить всего три строчки кода: 
```cpp
#pragma comment(lib, "User32.lib") // <--
#include <Windows.h>               // <--
/*Изначальный код*/
int main() {
    SetProccessDPIAware();         // <--
    /*Изначальный код*/
}
```
К сожалению, не все программисты поднимают этот флаг, поэтому некоторые приложения до сих пор будут некорректно отображаться на мониторах с высоким DPI. Но если приложение
вообще способно на самостоятельное масштабирование, то эту проблему может решить и пользователь. Достаточно создать манифест, настроить и интегрировать его в exe-файл приложения.
Однако эта процедура может занять довольно большое время, особенно если у Вас не установлен набор инструментов Windows App SDK. Моя программа помогает автоматизировать этот
процесс.

![image](https://github.com/user-attachments/assets/9c787a53-c906-4896-a99f-78f87b9b7820)

То, что я описал наглядно проиллюстрировано на картинке. Сверху показано окно приложение чётким, каким оно и должно быть, а снизу - размытым, каким его видите Вы.

# Проблема стилей компонентов окна (ComCtl version problem)
Моя программа помогает сделать ещё одну приятную вещь в Windows - поменять стиль содержимого окно (кнопок, полей для ввода и тд) со старово на новый.

![image](https://github.com/user-attachments/assets/d30217b1-0710-4836-87a0-9367f8ca8570)

На иллюстрации представлены два окна: наверху окно с новым стилем, внизу - со старым.

Вообще, стиль компонентов зависит от того, какую версию библиотеки ComCtl разработчики приложения использовали. Однако эту версию можнет поменять и пользователь, покопавшись
в манифесте приложения.

# Как пользоваться корректором манифеста
Откройте файл `manifest corrector.exe`. Далее укажите программе тот exe-файл, манифест которого необходимо отредактировать. Для этого нажмите на кнопку `Открыть файл` и 
выберите в появившемся диалоговом окне нужный файл. Или же укажите путь до exe-файла (включая именя и расширение) в строке напротив кнопки. Путь принимается как абсолютный,
так и относительный. После того как файл выбран, укажите, что именно должно входить в новый манифест exe-файла. Для этого отметьте по своему усмотрению пункты
`Поднять флаг dpiAware` и\или `Использовать новые стили (ComCtl v6)`. После чего нажмите кнопку `Скорректировать файл`.
### Внимание! Данная программа не изменит, а полностью перезапишет манифест указанного exe-файла! Если Вам необходимо сохранить часть данных из старого манифеста, добавьте их в файл `base.manifest`.
